{% extends "base.twig" %}

{% block content %}
	<section class="bg-teal-lightest">
		<div class="container py-6">
      {% if post.get_field("home_page_tagline") %}
        <div class="HeroBlock mb-3 md:mb-4">
          <h1 class="Block Block--dark">{{ post.get_field("home_page_tagline") }}</h1>
        </div>
      {% endif %}

      {% if post.get_field("home_page_links") %}
        <nav>
          <ul class="flex">
            {% for item in post.get_field("home_page_links") %}
              {% set link_href = "#" %}
              {% if item.link_type == "url" %}
                {% set link_href = item.link_url %}
              {% elseif item.link_type == "page" %}
                {% set link_href = item.link_to_page %}
              {% endif %}
              <li class="mr-3">
                <a class="Block Block--light" href="{{ link_href }}">{{ item.link_label }}</a>
              </li>
            {% endfor %}
          </ul>
        </nav>
      {% endif %}
		</div>
	</section>

	{% if post.get_field("home_page_news_stories") %}
		<section class="py-5 bg-orange text-white">
			<div class="container">
				<h2 class="mb-4 font-bold text-3xl text-center">Breaking News!</h2>

				<nav>
          <div class="mb-4">
            <ul class="flex flex-wrap -m-2">
              {% for post in post.get_field("home_page_news_stories") %}
                <li class="w-full md:flex-1 m-2">
                  <a class="block p-4 border-2 border-white hover:bg-white hover:text-orange no-underline" href="{{ post.link }}">
                    <span class="block mb-3">{% spaceless %}
                      {{ post.date }}
                      {% if post.author.first_name or post.author.last_name %}
                        •
                        {{ post.author.first_name }}
                        {{ post.author.last_name }}
                      {% endif %}
                      {% if post.terms("news-categories") %}
                        •
                        {{ post.terms("news-categories")|join(", ") }}
                      {% endif %}
                    {% endspaceless %}</span><br class="hidden">

                    <span class="block mb-3 font-bold text-3xl">{{ post.title }}</span><br class="hidden">

                    <span class="block font-bold small-caps">Read more</span>
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>

          <div class="text-center">
				    <a class="Block Block--inverted" href="{{ site.link }}/news/">View more news</a>
          </div>
				</nav>
			</div>
		</section>
	{% endif %}

	{% embed "partials/section.twig" %}
		{% block title %}
			About
			{{ site.title }}
		{% endblock %}

		{% block content %}
			<div class="max-w-md mb-4">
        {{ post.get_field("home_page_about_text") }}
      </div>

			<nav>
				<ul class="flex flex-wrap -m-2">
          {% if post.get_field("home_page_locations_image") %}
            <li class="w-full md:flex-1 m-2">
              <a href="{{ site.link }}/locations/">{% spaceless %}
                <img class="block mb-3 w-full object-cover border-2 border-orange hover:border-teal-darkest" src="{{ TimberImage(post.get_field("home_page_locations_image")).src("large") }}" height="256" alt="">
              {% endspaceless %}</a><br class="hidden">

              <a class="Block Block--light" href="{{ site.link }}/locations/">View our locations</a>
            </li>
          {% endif %}

          {% if post.get_field("home_page_tools_image") %}
            <li class="w-full md:flex-1 m-2">
              <a href="{{ site.link }}/tools/">{% spaceless %}
                <img class="block mb-3 w-full object-cover border-2 border-orange hover:border-teal-darkest" src="{{ TimberImage(post.get_field("home_page_tools_image")).src("large") }}" height="256" alt="">
              {% endspaceless %}</a><br class="hidden">

              <a class="Block Block--light" href="{{ site.link }}/tools/">Check out the tools</a>
            </li>
          {% endif %}

          {% if post.get_field("home_page_events_image") %}
            <li class="w-full md:flex-1 m-2">
              <a href="{{ site.link }}/events/">{% spaceless %}
                <img class="block mb-3 w-full object-cover border-2 border-orange hover:border-teal-darkest" src="{{ TimberImage(post.get_field("home_page_events_image")).src("large") }}" height="256" alt="">
              {% endspaceless %}</a><br class="hidden">

              <a class="Block Block--light" href="{{ site.link }}/events/">Find upcoming events</a>
            </li>
          {% endif %}

          {% if post.get_field("home_page_badging_image") %}
            <li class="w-full md:flex-1 m-2">
              <a href="{{ site.link }}/badges/">{% spaceless %}
                <img class="block mb-3 w-full object-cover border-2 border-orange hover:border-teal-darkest" src="{{ TimberImage(post.get_field("home_page_badging_image")).src("large") }}" height="256" alt="">
              {% endspaceless %}</a><br class="hidden">

              <a class="Block Block--light" href="{{ site.link }}/badges/">Read about badging</a>
            </li>
          {% endif %}
				</ul>
			</nav>
		{% endblock %}
	{% endembed %}

	{% embed "partials/section.twig" %}
		{% block title %}
			Today’s Events
		{% endblock %}

		{% block content %}
			<p class="max-w-md mb-4">What are you doing today?</p>

      <nav>
        <div class="mb-4">
          <ul class="flex flex-wrap -m-2">
            {% for event in events %}
              <li class="w-full md:flex-1 m-2">
                {% set event_date = event.event_start | date("F j, Y • g:ia") ~ "–" %}

                {% if event.event_start | date("F j, Y") == event.event_end | date("F j, Y") %}
                  {% set event_date = event_date ~ event.event_end | date("g:ia") %}
                {% else %}
                  {% set event_date = event_date ~ event.event_end | date("F j, Y • g:ia") %}
                {% endif %}

                {% include "partials/card.twig" with {
                  title : event.event_name,
                  link: event.link,
                  primary_text: event_date,
                  secondary_text: event.location_name,
                  image_src: TimberImage(event.get_field("event_image")).src("large")
                }
                only %}
              </li>
            {% endfor %}
          </ul>
        </div>

        <a class="Block Block--light" href="{{ site.link }}/events/">View our calendar</a>
      </nav>
		{% endblock %}
	{% endembed %}

  {% if post.get_field("home_page_partner_text") %}
    <section class="py-6 bg-cover bg-teal-dark text-white" style="background-image: url('{{ TimberImage(post.get_field("home_page_partner_image")).src("large") }}')">
      <div class="container">
        <h2 class="mb-3 font-bold text-2xl">Partner with Us</h2>

        <p class="max-w-md mb-4">{{ post.get_field("home_page_partner_text") }}</p>

        <a class="Block Block--inverted" href="{{ site.link }}/partner/">Learn about partnership opportunities</a>
      </div>
    </section>
  {% endif %}
{% endblock %}
